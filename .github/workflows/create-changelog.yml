name: Ï†ïÍ∏∞ Î¶¥Î¶¨Ï¶àÎ•º ÏúÑÌïú ChangeLog ÏÉùÏÑ±

on:
  push:
    branches:
      - 'release/*'

jobs:
  release:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18.20.0'

  slack-alarm:
    runs-on: ubuntu-latest

    steps:
      - name: slack Î©îÏãúÏßÄ Ï†ÑÏÜ°
        uses: slackapi/slack-github-action@v1.24.0
        with:
          channel-id: ${{ secrets.TEST_CHANNEL_ID }}
          payload: |
            {
              "text": "release message",
              "blocks": [
                {
                  "type": "header",
                  "text": {
                    "type": "plain_text",
                    "text": "00 Ïä§ÌîÑÎ¶∞Ìä∏ Î¶¥Î¶¨Ï¶à Ïó¥Ï∞®Í∞Ä ÎèÑÏ∞©ÌñàÏäµÎãàÎã§ üöÇ",
                    "emoji": true
                  }
                },
                {
                  "type": "section",
                  "text": {
                    "type": "mrkdwn",
                    "text": "Î∏åÎûúÏπò: <https://www.goorm.io/dashboard|release/20241103>"
                  }
                },
                {
                  "type": "divider"
                },
                {
                  "type": "rich_text",
                  "elements": [
                    {
                      "type": "rich_text_section",
                      "elements": [
                        {
                          "type": "text",
                          "text": "00 Ïä§ÌîÑÎ¶∞Ìä∏ÏóêÎäî ...",
                          "style": {
                            "bold": true
                          }
                        },
                        {
                          "type": "text",
                          "text": "\n\n"
                        }
                      ]
                    },
                    {
                      "type": "rich_text_list",
                      "style": "bullet",
                      "indent": 0,
                      "border": 0,
                      "elements": [
                        {
                          "type": "rich_text_section",
                          "elements": [
                            {
                              "type": "text",
                              "text": "ÏóÖÎç∞Ïù¥Ìä∏1"
                            }
                          ]
                        },
                        {
                          "type": "rich_text_section",
                          "elements": [
                            {
                              "type": "text",
                              "text": "ÏóÖÎç∞Ïù¥Ìä∏1"
                            }
                          ]
                        },
                        {
                          "type": "rich_text_section",
                          "elements": [
                            {
                              "type": "text",
                              "text": "ÏóÖÎç∞Ïù¥Ìä∏1"
                            }
                          ]
                        },
                        {
                          "type": "rich_text_section",
                          "elements": [
                            {
                              "type": "text",
                              "text": "ÏóÖÎç∞Ïù¥Ìä∏1"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "actions",
                  "elements": [
                    {
                      "type": "button",
                      "text": {
                        "type": "plain_text",
                        "emoji": true,
                        "text": "ÏäπÏù∏"
                      },
                      "style": "primary",
                      "value": "accept release"
                    },
                    {
                      "type": "button",
                      "text": {
                        "type": "plain_text",
                        "emoji": true,
                        "text": "Í±∞Ï†à"
                      },
                      "style": "danger",
                      "value": "reject release"
                    }
                  ]
                }
              ]
            }
        env:
          SLACK_BOT_TOKEN: ${{ secrets.TEST_BOT_TOKEN }}
      # - name: Install dependencies
      #   run: yarn install

      # - name: Run Lerna version
      #   run: yarn version

      # - name: Commit and push CHANGELOG.md
      #   run: |
      #     git config --global user.name "github-actions[bot]"
      #     git config --global user.email "github-actions[bot]@users.noreply.github.com"
      #     git add CHANGELOG.md
      #     git commit -m "chore: update CHANGELOG.md"
      #     git push origin release/${{ github.ref_name }}
